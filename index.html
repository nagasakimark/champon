<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your Custom Champon!</title>
	<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/iconify/3.1.0/iconify.min.js"></script>
    <style>
        body {
            font-family: 'Comic Sans MS','Comic Neue', cursive, sans-serif;
            background-color: #f0f8ff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 800px;
            width: 100%;
        }
        h1 {
            color: #ff6b6b;
            font-size: 24px;
            margin-bottom: 10px;
        }
        .letter-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        .letter-button {
            font-size: 18px;
            margin: 3px;
            padding: 8px 12px;
            background-color: #4ecdc4;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .letter-button:hover {
            background-color: #45b7aa;
        }
        .ingredient-list {
            display: none;
            margin-bottom: 20px;
        }
        .ingredient-button {
            font-size: 16px;
            margin: 3px;
            padding: 6px 10px;
            background-color: #ffd93d;
            color: #333;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .ingredient-button:hover {
            background-color: #ffc107;
        }
        .ingredient-button .iconify {
            margin-right: 6px;
            font-size: 20px;
        }
		.letter-row {
             display: flex;
            justify-content: center;
            width: 100%;
            margin-bottom: 10px;
}
        #selectedIngredients {
            font-size: 16px;
            margin-bottom: 15px;
        }
        #result {
            display: none;
        }
        #champonContainer {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin: 0 auto;
        }
        #champonSVG {
            width: 500px;
            height: 450px;
        }
        #ingredientLetters {
            text-align: left;
            padding: 10px;
            width: 200px;
        }
        .ingredient-letter {
            font-size: 32px;
            font-weight: bold;
            border: 2px solid #ff6b6b;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            margin-right: 8px;
        }
        .ingredient-name {
            font-size: 18px;
            color: #333;
        }
        #newChamponButton {
            font-size: 18px;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #ff6b6b;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #newChamponButton:hover {
            background-color: #ff5252;
        }
		#loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        #loadingScreen img {
            width: 200px;
            height: 200px;
            margin-bottom: 20px;
        }
        #loadingText {
            font-size: 24px;
            color: #333;
        }
		#footer {
			font-size: 12px;
			color: #888;
			text-align: center;
			margin-top: 20px;
			position: absolute;
			bottom: 10px;
			width: 100%;
}

    </style>
</head>
<body>
    <div class="container">
        <h1>Create Your Custom Champon!</h1>
        <div id="letterSelection">
            <p>Choose 4 letters to create your Champon:</p>
            <div class="letter-buttons">
                <!-- Letter buttons will be added here dynamically -->
            </div>
        </div>
        <div id="ingredientSelection" class="ingredient-list">
            <p>Choose an ingredient:</p>
            <!-- Ingredient buttons will be added here dynamically -->
        </div>
        <div id="selectedIngredients"></div>
        <div id="result">
            <h2>Your Custom Champon is Ready!</h2>
            <div id="champonContainer">
                <div id="ingredientLetters">
                    <!-- Ingredient letters and names will be added here dynamically -->
                </div>
                <svg id="champonSVG" width="500" height="450" viewBox="0 0 1142 880">
                    <image href="champon.png" width="1142" height="880" />
                    <!-- Ingredient icons will be added here dynamically -->
                </svg>
            </div>
            <p id="champonDescription"></p>
            <button id="newChamponButton">Make a New Champon</button>
        </div>
    </div>

    <script>
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
const ingredients = {
            'A': [
                { name: 'Apple', icon: 'twemoji:red-apple' },
                { name: 'Avocado', icon: 'twemoji:avocado' },
                { name: 'Aubergine', icon: 'twemoji:eggplant' },
            ],
            'B': [
                { name: 'Bacon', icon: 'twemoji:bacon' },
                { name: 'Broccoli', icon: 'twemoji:broccoli' },
                { name: 'Beef', icon: 'twemoji:cut-of-meat' },
                { name: 'Banana', icon: 'twemoji:banana' },
                { name: 'Blueberry', icon: 'twemoji:blueberries' }
            ],
            'C': [
                { name: 'Carrot', icon: 'twemoji:carrot' },
                { name: 'Chicken', icon: 'twemoji:poultry-leg' },
                { name: 'Cheese', icon: 'twemoji:cheese-wedge' },
                { name: 'Corn', icon: 'twemoji:ear-of-corn' },
                { name: 'Cherry', icon: 'twemoji:cherries' }
            ],
            'D': [
                { name: 'Duck', icon: 'twemoji:duck' },
                { name: 'Dango', icon: 'twemoji:dango' },
                { name: 'Donut', icon: 'twemoji:doughnut' },
            ],
            'E': [
                { name: 'Egg', icon: 'twemoji:egg' },
                { name: 'Eggplant', icon: 'twemoji:eggplant' },
                { name: 'Edamame', icon: 'fluent-emoji-flat:pea-pod' },
            ],
            'F': [
                { name: 'Fish', icon: 'twemoji:fish' },
                { name: 'Fries', icon: 'twemoji:french-fries' },
                { name: 'Fig', icon: 'twemoji:chestnut' },
                { name: 'Flan', icon: 'twemoji:custard' },
                { name: 'Furikake', icon: 'twemoji:salt' }
            ],
            'G': [
                { name: 'Grapes', icon: 'twemoji:grapes' },
                { name: 'Garlic', icon: 'twemoji:garlic' },
                { name: 'Ginger', icon: 'fluent-emoji-flat:ginger-root' },
                { name: 'Gyoza', icon: 'twemoji:dumpling' },
            ],
            'H': [
                { name: 'Ham', icon: 'twemoji:cut-of-meat' },
                { name: 'Hamburger', icon: 'twemoji:hamburger' },
                { name: 'Honey', icon: 'twemoji:honey-pot' },
                { name: 'Hot Dog', icon: 'twemoji:hot-dog' },
                { name: 'Hayashi Rice', icon: 'emojione-v1:curry-rice' }
            ],
            'I': [
                { name: 'Ice Cream', icon: 'twemoji:ice-cream' },
                { name: 'Instant Ramen', icon: 'twemoji:steaming-bowl' }
            ],
            'J': [
                { name: 'Jam', icon: 'twemoji:jar' },
                { name: 'Jelly', icon: 'twemoji:custard' },
                { name: 'Jalapeno', icon: 'twemoji:hot-pepper' },
                { name: 'Jack Fruit', icon: 'twemoji:melon' },
            ],
            'K': [
                { name: 'Kiwi', icon: 'twemoji:kiwi-fruit' },
                { name: 'Kale', icon: 'twemoji:leafy-green' }
            ],
            'L': [
                { name: 'Lemon', icon: 'twemoji:lemon' },
                { name: 'Lobster', icon: 'twemoji:lobster' },
                { name: 'Lettuce', icon: 'twemoji:leafy-green' },
                { name: 'Lollipop', icon: 'twemoji:lollipop' },
            ],
            'M': [
                { name: 'Mango', icon: 'twemoji:mango' },
                { name: 'Mushroom', icon: 'twemoji:mushroom' },
                { name: 'Meatball', icon: 'twemoji:meat-on-bone' },
                { name: 'Matcha', icon: 'twemoji:teacup-without-handle' }
            ],
            'N': [
                { name: 'Natto', icon: 'twemoji:beans' },
                { name: 'Nori', icon: 'twemoji:leafy-green' },
                { name: 'Noodles', icon: 'twemoji:spaghetti' },
                { name: 'Nuts', icon: 'twemoji:peanuts' },
                { name: 'Naruto', icon: 'twemoji:fish-cake-with-swirl' }
            ],
            'O': [
                { name: 'Orange', icon: 'twemoji:tangerine' },
                { name: 'Onion', icon: 'twemoji:onion' },
                { name: 'Octopus', icon: 'twemoji:octopus' },
                { name: 'Omelette', icon: 'twemoji:egg' },
            ],
            'P': [
                { name: 'Pizza', icon: 'twemoji:pizza' },
                { name: 'Pear', icon: 'twemoji:pear' },
                { name: 'Pineapple', icon: 'twemoji:pineapple' },
                { name: 'Pork', icon: 'twemoji:cut-of-meat' },
                { name: 'Potato', icon: 'twemoji:potato' }
            ],
            'Q': [
                { name: 'Quiche', icon: 'twemoji:pie' },
                { name: 'Quesadilla', icon: 'twemoji:stuffed-flatbread' },
            ],
            'R': [
                { name: 'Rice', icon: 'twemoji:cooked-rice' },
                { name: 'Ramen', icon: 'twemoji:steaming-bowl' },
                { name: 'Radish', icon: 'twemoji:carrot' },
                { name: 'Raspberry', icon: 'twemoji:strawberry' },
            ],
            'S': [
                { name: 'Sushi', icon: 'twemoji:sushi' },
                { name: 'Strawberry', icon: 'twemoji:strawberry' },
                { name: 'Sausage', icon: 'twemoji:hot-dog' },
                { name: 'Salmon', icon: 'twemoji:fish' },
				{ name: 'Squid', icon: 'noto-v1:squid' },
            ],
            'T': [
                { name: 'Tomato', icon: 'twemoji:tomato' },
                { name: 'Taco', icon: 'twemoji:taco' },
                { name: 'Tempura', icon: 'twemoji:fried-shrimp' }
            ],
            'U': [
                { name: 'Ume', icon: 'twemoji:peach' },
            ],
            'V': [
                { name: 'Vegetable', icon: 'twemoji:leafy-green' },
                { name: 'Venison', icon: 'twemoji:deer' }
            ],
            'W': [
                { name: 'Watermelon', icon: 'twemoji:watermelon' },
                { name: 'Waffle', icon: 'twemoji:waffle' },
                { name: 'Wagyu', icon: 'twemoji:cut-of-meat' },
                { name: 'Wakame', icon: 'twemoji:leafy-green' }
            ],
            'X': [
                { name: 'Xigua', icon: 'twemoji:watermelon' },
            ],
            'Y': [
                { name: 'Yakitori', icon: 'twemoji:meat-on-bone' },
                { name: 'Yam', icon: 'fxemoji:roastedsweetpotato' },
                { name: 'Yuzu', icon: 'twemoji:lemon' },
            ],
            'Z': [
                { name: 'Zucchini', icon: 'twemoji:cucumber' },
            ]
        };

        let selectedIngredients = [];
        let placedIngredients = [];

        function createLetterButtons() {
            const letterButtons = document.querySelector('.letter-buttons');
            const halfLength = Math.ceil(letters.length / 2);
    
            for (let i = 0; i < 2; i++) {
                const row = document.createElement('div');
                row.classList.add('letter-row');
        
                const start = i * halfLength;
                const end = Math.min((i + 1) * halfLength, letters.length);
        
                for (let j = start; j < end; j++) {
                    const letter = letters[j];
                    const button = document.createElement('button');
                    button.textContent = letter;
                    button.classList.add('letter-button');
                    button.onclick = () => showIngredients(letter);
                    row.appendChild(button);
                }
        
             letterButtons.appendChild(row);
        }
    }


        function showIngredients(letter) {
            const ingredientList = document.getElementById('ingredientSelection');
            ingredientList.innerHTML = '<p>Choose an ingredient:</p>';
            ingredientList.style.display = 'block';

            const letterIngredients = ingredients[letter] || defaultIngredients;

            letterIngredients.forEach(ingredient => {
                const button = document.createElement('button');
                button.classList.add('ingredient-button');
                button.onclick = () => selectIngredient(ingredient);
                
                const icon = document.createElement('span');
                icon.className = 'iconify';
                icon.setAttribute('data-icon', ingredient.icon);
                
                const text = document.createTextNode(ingredient.name);
                
                button.appendChild(icon);
                button.appendChild(text);
                ingredientList.appendChild(button);
            });
        }

        function selectIngredient(ingredient) {
            selectedIngredients.push(ingredient);
            updateSelectedIngredients();

            if (selectedIngredients.length === 4) {
                showLoadingScreen();
            } else {
                document.getElementById('ingredientSelection').style.display = 'none';
            }
        }

        function updateSelectedIngredients() {
            const selectedIngredientsDiv = document.getElementById('selectedIngredients');
            selectedIngredientsDiv.textContent = `Selected ingredients: ${selectedIngredients.map(i => i.name).join(', ')}`;
        }
        function showLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            loadingScreen.style.display = 'flex';
    
            const loadingText = document.getElementById('loadingText');
            let dots = '';
            const intervalId = setInterval(() => {
                dots = dots.length < 3 ? dots + '.' : '';
                loadingText.textContent = `Creating your custom Champon${dots}`;
            }, 500);

            setTimeout(() => {
                clearInterval(intervalId);
                loadingScreen.style.display = 'none';
                showResult();
            }, 2000);
        }
        function getRandomPosition() {
            const bowlCenterX = 571; // Approximate center X of the bowl
            const bowlCenterY = 880 - 612; // Approximate center Y of the bowl (adjusting for bottom-left origin)
            const bowlRadiusX = 440; // Approximate horizontal radius of the bowl
            const bowlRadiusY = 225; // Approximate vertical radius of the bowl

            let angle = Math.random() * 2 * Math.PI;
            let r = Math.sqrt(Math.random()) * 0.8; // Reduce to 80% to keep ingredients more centered

            let x = bowlCenterX + r * bowlRadiusX * Math.cos(angle);
            let y = bowlCenterY + r * bowlRadiusY * Math.sin(angle);

            return { x, y };
        }

        function checkCollision(x, y, size) {
            for (let placed of placedIngredients) {
                const dx = x - placed.x;
                const dy = y - placed.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < size + placed.size) {
                    return true; // Collision detected
                }
            }
            return false; // No collision
        }

        function findNonOverlappingPosition(size) {
            let attempts = 0;
            let position;
            do {
                position = getRandomPosition();
                attempts++;
            } while (checkCollision(position.x, position.y, size) && attempts < 100);

            if (attempts < 100) {
                placedIngredients.push({ x: position.x, y: position.y, size: size });
                return position;
            }
            return null; // Couldn't find a non-overlapping position
        }

        async function getIconSVG(iconName) {
            const response = await fetch(`https://api.iconify.design/${iconName}.svg`);
            const svgText = await response.text();
            const parser = new DOMParser();
            const svgDoc = parser.parseFromString(svgText, 'image/svg+xml');
            return svgDoc.documentElement;
        }

async function showResult() {
            document.getElementById('letterSelection').style.display = 'none';
            document.getElementById('ingredientSelection').style.display = 'none';
            document.getElementById('result').style.display = 'block';

            const champonSVG = document.getElementById('champonSVG');
            const ingredientLetters = document.getElementById('ingredientLetters');

            // Clear previous results
            champonSVG.innerHTML = '<image href="champon.png" width="1142" height="880" />';
            ingredientLetters.innerHTML = '';
            placedIngredients = [];

            // Create an array to store promises for each ingredient
            const ingredientPromises = selectedIngredients.map(async (ingredient, index) => {
                const iconSize = 160;
                const position = findNonOverlappingPosition(iconSize / 2);

                if (position) {
                    const { x, y } = position;
                    const rotation = Math.random() * 360;

                    const iconSVG = await getIconSVG(ingredient.icon);
                    const halfSize = iconSize / 2;

                    iconSVG.setAttribute('x', x - halfSize);
                    iconSVG.setAttribute('y', y - halfSize);
                    iconSVG.setAttribute('width', iconSize.toString());
                    iconSVG.setAttribute('height', iconSize.toString());
                    iconSVG.style.overflow = 'visible';
                    iconSVG.setAttribute('transform', `rotate(${rotation} ${x} ${y})`);

                    // Create ingredient letter and name
                    const letterDiv = document.createElement('div');
                    letterDiv.style.marginBottom = '10px';
                    
                    const letterSpan = document.createElement('span');
                    letterSpan.textContent = ingredient.name[0].toUpperCase();
                    letterSpan.className = 'ingredient-letter';
                    
                    const nameSpan = document.createElement('span');
                    nameSpan.textContent = ingredient.name;
                    nameSpan.className = 'ingredient-name';
                    
                    letterDiv.appendChild(letterSpan);
                    letterDiv.appendChild(nameSpan);

                    return { iconSVG, letterDiv, index };
                }
                return null;
            });

            // Wait for all ingredient promises to resolve
            const results = await Promise.all(ingredientPromises);

            // Add ingredients to the SVG and ingredient list in the correct order
            results.filter(result => result !== null)
                   .sort((a, b) => a.index - b.index)
                   .forEach(result => {
                       champonSVG.appendChild(result.iconSVG);
                       ingredientLetters.appendChild(result.letterDiv);
                   });

            const champonDescription = document.getElementById('champonDescription');
            champonDescription.textContent = `Your delicious Champon contains: ${selectedIngredients.map(i => i.name).join(', ')}. Enjoy your unique creation!`;
        }

        function resetChampon() {
            selectedIngredients = [];
            document.getElementById('result').style.display = 'none';
            document.getElementById('letterSelection').style.display = 'block';
            document.getElementById('selectedIngredients').textContent = '';
            updateSelectedIngredients();
        }

        createLetterButtons();

        document.getElementById('newChamponButton').addEventListener('click', resetChampon);
    </script>
<div id="loadingScreen" style="display: none;">
    <img src="cat.gif" alt="Loading">
    <div id="loadingText">Creating your custom Champon...</div>
</div>
<footer id="footer">
    Made by Mark
</footer>
</body>
</html>
